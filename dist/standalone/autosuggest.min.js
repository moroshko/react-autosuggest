!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.Autosuggest=t(require("React")):e.Autosuggest=t(e.React)}(this,function(e){return function(e){function t(s){if(n[s])return n[s].exports;var o=n[s]={exports:{},id:s,loaded:!1};return e[s].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],s=!0,o=!1,u=void 0;try{for(var i,r=e[Symbol.iterator]();!(s=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(l){o=!0,u=l}finally{try{!s&&r["return"]&&r["return"]()}finally{if(o)throw u}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),g=function(e,t,n){for(var s=!0;s;){var o=e,u=t,i=n;r=g=l=void 0,s=!1,null===o&&(o=Function.prototype);var r=Object.getOwnPropertyDescriptor(o,u);if(void 0!==r){if("value"in r)return r.value;var l=r.get;return void 0===l?void 0:l.call(i)}var g=Object.getPrototypeOf(o);if(null===g)return void 0;e=g,t=u,n=i,s=!0}},a=n(1),c=s(a),f=n(2),h=s(f),d=n(4),p=s(d),v=n(5),S=s(v),y=function(e){function t(e){u(this,t),g(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache={},this.state={value:e.inputAttributes.value||"",suggestions:null,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null},this.suggestionsFn=h["default"](e.suggestions,100),this.onChange=e.inputAttributes.onChange||function(){},this.onBlur=e.inputAttributes.onBlur||function(){},this.lastSuggestionsInputValue=null,this.justUnfocused=!1,this.justClickedOnSuggestion=!1,this.onInputChange=this.onInputChange.bind(this),this.onInputKeyDown=this.onInputKeyDown.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}return i(t,e),l(t,[{key:"resetSectionIterator",value:function(e){this.isMultipleSections(e)?S["default"].setData(e.map(function(e){return e.suggestions.length})):S["default"].setData(null===e?[]:e.length)}},{key:"isMultipleSections",value:function(e){return null!==e&&e.length>0&&"undefined"!=typeof e[0].suggestions}},{key:"setSuggestionsState",value:function(e){this.resetSectionIterator(e),this.setState({suggestions:e,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null})}},{key:"suggestionsExist",value:function(e){return this.isMultipleSections(e)?e.some(function(e){return e.suggestions.length>0}):null!==e&&e.length>0}},{key:"showSuggestions",value:function(e){var t=this,n=e.toLowerCase();this.lastSuggestionsInputValue=e,this.props.showWhen(e)?this.cache[n]?this.setSuggestionsState(this.cache[n]):this.suggestionsFn(e,function(s,o){if(t.lastSuggestionsInputValue===e){if(s)throw s;t.suggestionsExist(o)||(o=null),t.cache[n]=o,t.setSuggestionsState(o)}}):this.setSuggestionsState(null)}},{key:"suggestionIsFocused",value:function(){return null!==this.state.focusedSuggestionIndex}},{key:"getSuggestion",value:function(e,t){return this.isMultipleSections(this.state.suggestions)?this.state.suggestions[e].suggestions[t]:this.state.suggestions[t]}},{key:"getFocusedSuggestion",value:function(){return this.suggestionIsFocused()?this.getSuggestion(this.state.focusedSectionIndex,this.state.focusedSuggestionIndex):null}},{key:"getSuggestionValue",value:function(e,t){var n=this.getSuggestion(e,t);if("object"==typeof n){if(this.props.suggestionValue)return this.props.suggestionValue(n);throw new Error("When <suggestion> is an object, you must implement the suggestionValue() function to specify how to set input's value when suggestion selected.")}return n.toString()}},{key:"onSuggestionUnfocused",value:function(){var e=this.getFocusedSuggestion();null===e||this.justUnfocused||(this.props.onSuggestionUnfocused(e),this.justUnfocused=!0)}},{key:"onSuggestionFocused",value:function(e,t){this.onSuggestionUnfocused();var n=this.getSuggestion(e,t);this.props.onSuggestionFocused(n),this.justUnfocused=!1}},{key:"scrollToElement",value:function(e,t,n){if("bottom"===n){var s=t.offsetTop+t.offsetHeight-e.scrollTop-e.offsetHeight;s>0&&(e.scrollTop+=s)}else{var s=e.scrollTop-t.offsetTop;s>0&&(e.scrollTop-=s)}}},{key:"scrollToSuggestion",value:function(e,t,n){var s="down"===e?"bottom":"top";if(null===n){if("down"!==e)return;s="top";var u=S["default"].next([null,null]),i=o(u,2);t=i[0],n=i[1]}else S["default"].isLast([t,n])&&"up"===e&&(s="bottom");var r=a.findDOMNode(this.refs.suggestions),l=this.getSuggestionRef(t,n),g=a.findDOMNode(this.refs[l]);this.scrollToElement(r,g,s)}},{key:"focusOnSuggestionUsingKeyboard",value:function(e,t){var n=o(t,2),s=n[0],u=n[1],i={focusedSectionIndex:s,focusedSuggestionIndex:u,value:null===u?this.state.valueBeforeUpDown:this.getSuggestionValue(s,u)};null===this.state.valueBeforeUpDown&&(i.valueBeforeUpDown=this.state.value),null===u?this.onSuggestionUnfocused():this.onSuggestionFocused(s,u),this.props.scrollBar&&this.scrollToSuggestion(e,s,u),this.onChange(i.value),this.setState(i)}},{key:"onSuggestionSelected",value:function(e){var t=this.getFocusedSuggestion();this.props.onSuggestionUnfocused(t),this.props.onSuggestionSelected(t,e)}},{key:"onInputChange",value:function(e){var t=e.target.value;this.onSuggestionUnfocused(),this.onChange(t),this.setState({value:t,valueBeforeUpDown:null}),this.showSuggestions(t)}},{key:"onInputKeyDown",value:function(e){var t=void 0;switch(e.keyCode){case 13:null!==this.state.valueBeforeUpDown&&this.suggestionIsFocused()&&this.onSuggestionSelected(e),this.setSuggestionsState(null);break;case 27:t={suggestions:null,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null},null!==this.state.valueBeforeUpDown?t.value=this.state.valueBeforeUpDown:null===this.state.suggestions&&(t.value=""),this.onSuggestionUnfocused(),"string"==typeof t.value&&t.value!==this.state.value&&this.onChange(t.value),this.setState(t);break;case 38:null===this.state.suggestions?this.showSuggestions(this.state.value):this.focusOnSuggestionUsingKeyboard("up",S["default"].prev([this.state.focusedSectionIndex,this.state.focusedSuggestionIndex])),e.preventDefault();break;case 40:null===this.state.suggestions?this.showSuggestions(this.state.value):this.focusOnSuggestionUsingKeyboard("down",S["default"].next([this.state.focusedSectionIndex,this.state.focusedSuggestionIndex]))}}},{key:"onInputBlur",value:function(){this.onSuggestionUnfocused(),this.justClickedOnSuggestion||this.onBlur(),this.setSuggestionsState(null)}},{key:"isSuggestionFocused",value:function(e,t){return e===this.state.focusedSectionIndex&&t===this.state.focusedSuggestionIndex}},{key:"onSuggestionMouseEnter",value:function(e,t){this.isSuggestionFocused(e,t)||this.onSuggestionFocused(e,t),this.setState({focusedSectionIndex:e,focusedSuggestionIndex:t})}},{key:"onSuggestionMouseLeave",value:function(e,t){this.isSuggestionFocused(e,t)&&this.onSuggestionUnfocused(),this.setState({focusedSectionIndex:null,focusedSuggestionIndex:null})}},{key:"onSuggestionMouseDown",value:function(e,t,n){var s=this,o=this.getSuggestionValue(e,t);this.justClickedOnSuggestion=!0,this.onSuggestionSelected(n),this.onChange(o),this.setState({value:o,suggestions:null,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null},function(){setTimeout(function(){a.findDOMNode(s.refs.input).focus(),s.justClickedOnSuggestion=!1})})}},{key:"getSuggestionId",value:function(e,t){return null===t?null:"react-autosuggest-"+this.props.id+"-"+this.getSuggestionRef(e,t)}},{key:"getSuggestionRef",value:function(e,t){return"suggestion-"+(null===e?"":e)+"-"+t}},{key:"renderSuggestionContent",value:function(e){if(this.props.suggestionRenderer)return this.props.suggestionRenderer(e,this.state.valueBeforeUpDown||this.state.value);if("object"==typeof e)throw new Error("When <suggestion> is an object, you must implement the suggestionRenderer() function to specify how to render it.");return e.toString()}},{key:"renderSuggestionsList",value:function(e,t){var n=this;return e.map(function(e,s){var o=p["default"]({"react-autosuggest__suggestion":!0,"react-autosuggest__suggestion--focused":t===n.state.focusedSectionIndex&&s===n.state.focusedSuggestionIndex}),u=n.getSuggestionRef(t,s);return c["default"].createElement("li",{id:n.getSuggestionId(t,s),className:o,role:"option",ref:u,key:u,onMouseEnter:function(){return n.onSuggestionMouseEnter(t,s)},onMouseLeave:function(){return n.onSuggestionMouseLeave(t,s)},onMouseDown:function(e){return n.onSuggestionMouseDown(t,s,e)}},n.renderSuggestionContent(e))})}},{key:"renderSuggestions",value:function(){var e=this;return""===this.state.value||null===this.state.suggestions?null:this.isMultipleSections(this.state.suggestions)?c["default"].createElement("div",{id:"react-autosuggest-"+this.props.id,className:"react-autosuggest__suggestions",ref:"suggestions",role:"listbox"},this.state.suggestions.map(function(t,n){var s=t.sectionName?c["default"].createElement("div",{className:"react-autosuggest__suggestions-section-name"},t.sectionName):null;return 0===t.suggestions.length?null:c["default"].createElement("div",{className:"react-autosuggest__suggestions-section",key:"section-"+n},s,c["default"].createElement("ul",{className:"react-autosuggest__suggestions-section-suggestions"},e.renderSuggestionsList(t.suggestions,n)))})):c["default"].createElement("ul",{id:"react-autosuggest-"+this.props.id,className:"react-autosuggest__suggestions",ref:"suggestions",role:"listbox"},this.renderSuggestionsList(this.state.suggestions,null))}},{key:"render",value:function(){var e=this.getSuggestionId(this.state.focusedSectionIndex,this.state.focusedSuggestionIndex);return c["default"].createElement("div",{className:"react-autosuggest"},c["default"].createElement("input",r({},this.props.inputAttributes,{type:"text",value:this.state.value,autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-owns":"react-autosuggest-"+this.props.id,"aria-expanded":null!==this.state.suggestions,"aria-activedescendant":e,ref:"input",onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,onBlur:this.onInputBlur})),this.renderSuggestions())}}],[{key:"propTypes",value:{suggestions:a.PropTypes.func.isRequired,suggestionRenderer:a.PropTypes.func,suggestionValue:a.PropTypes.func,showWhen:a.PropTypes.func,onSuggestionSelected:a.PropTypes.func,onSuggestionFocused:a.PropTypes.func,onSuggestionUnfocused:a.PropTypes.func,inputAttributes:a.PropTypes.object,id:a.PropTypes.string,scrollBar:a.PropTypes.bool},enumerable:!0},{key:"defaultProps",value:{showWhen:function(e){return e.trim().length>0},onSuggestionSelected:function(){},onSuggestionFocused:function(){},onSuggestionUnfocused:function(){},inputAttributes:{},id:"1",scrollBar:!1},enumerable:!0}]),t}(a.Component);t["default"]=y,e.exports=t["default"]},function(t,n){t.exports=e},function(e,t,n){var s=n(3);e.exports=function(e,t,n){function o(){var a=s()-l;t>a&&a>0?u=setTimeout(o,t-a):(u=null,n||(g=e.apply(r,i),u||(r=i=null)))}var u,i,r,l,g;return null==t&&(t=100),function(){r=this,i=arguments,l=s();var a=n&&!u;return u||(u=setTimeout(o,t)),a&&(g=e.apply(r,i),r=i=null),g}}},function(e,t){function n(){return(new Date).getTime()}e.exports=Date.now||n},function(e,t,n){var s;!function(){"use strict";function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];if(n){var s=typeof n;if("string"===s||"number"===s)e+=" "+n;else if(Array.isArray(n))e+=" "+o.apply(null,n);else if("object"===s)for(var u in n)n.hasOwnProperty(u)&&n[u]&&(e+=" "+u)}}return e.substr(1)}s=function(){return o}.call(t,n,t,e),!(void 0!==s&&(e.exports=s))}()},function(e,t){"use strict";function n(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],s=!0,o=!1,u=void 0;try{for(var i,r=e[Symbol.iterator]();!(s=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(l){o=!0,u=l}finally{try{!s&&r["return"]&&r["return"]()}finally{if(o)throw u}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(e){g=e,a="object"==typeof g}function o(e){for(null===e?e=0:e++;e<g.length&&0===g[e];)e++;return e===g.length?null:e}function u(e){for(null===e?e=g.length-1:e--;e>=0&&0===g[e];)e--;return-1===e?null:e}function i(e){var t=n(e,2),s=t[0],u=t[1];return a?null===u||u===g[s]-1?(s=o(s),null===s?[null,null]:[s,0]):[s,u+1]:0===g||u===g-1?[null,null]:null===u?[null,0]:[null,u+1]}function r(e){var t=n(e,2),s=t[0],o=t[1];return a?null===o||0===o?(s=u(s),null===s?[null,null]:[s,g[s]-1]):[s,o-1]:0===g||0===o?[null,null]:null===o?[null,g-1]:[null,o-1]}function l(e){return null===i(e)[1]}Object.defineProperty(t,"__esModule",{value:!0});var g=void 0,a=void 0;t["default"]={setData:s,next:i,prev:r,isLast:l},e.exports=t["default"]}])});